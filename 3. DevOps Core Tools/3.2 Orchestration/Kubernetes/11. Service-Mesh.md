---
title: "‚Ä¢ Service-Mesh"
parent: "‚Ä¢ Kubernetes"
grand_parent: 3. DevOps Core Tools
nav_order: 11
has_children: true
---

Topics:

Istio / Linkerd basics

Sidecar proxies

Traffic splitting, retries, mTLS

Observability and tracing

================================================================


---

# ‚úÖ **Service Mesh **

## ‚≠ê **What is Service Mesh?**

A **Service Mesh** is a dedicated infrastructure layer that controls **communication between microservices** inside a distributed application.

It mainly provides:

‚úî Traffic routing
‚úî Service-to-service communication
‚úî Reliability (retries, timeouts, circuit breakers)
‚úî Security (mTLS, authentication, authorization)
‚úî Observability (metrics, logs, tracing)
‚úî Gateway management
‚úî Load balancing
‚úî Fault injection, rate limiting
‚úî Canary deployments & blue/green deployments

---

## ‚≠ê **Why Service Mesh? (Simple Explanation)**

Microservices communicate with each other.
Without a service mesh, managing traffic, security, retries, failures becomes difficult.

Service Mesh helps in:

* Routing services
* Redirecting traffic
* Securing communication
* Managing complex distributed services
* Observability & monitoring

---

# ‚≠ê **Tools Used for Service Mesh**

### **üëâ Istio (Most Popular)**

Official documentation:
[https://istio.io/latest/docs/overview/what-is-istio/](https://istio.io/latest/docs/overview/what-is-istio/)

Istio uses Envoy proxies to manage traffic.

---

# ‚≠ê **Istio Architecture Components**

### **1Ô∏è‚É£ Envoy Proxy**

* A lightweight proxy injected as a **sidecar** into each pod.
* Handles:
  ‚úî Traffic routing
  ‚úî Retries/timeouts
  ‚úî TLS/mTLS encryption
  ‚úî Telemetry data
  ‚úî Load balancing

### **2Ô∏è‚É£ Istiod**

Istiod replaces the older components (Pilot, Citadel, Galley).
It provides:

| Old Component | Now in Istiod | Purpose                           |
| ------------- | ------------- | --------------------------------- |
| Pilot         | ‚úî             | Traffic management + Envoy config |
| Citadel       | ‚úî             | Certificates + mTLS               |
| Galley        | ‚úî             | Config validation                 |

So **Istiod = Pilot + Citadel + Galley**

### **3Ô∏è‚É£ Istio Operator**

* Helps install, upgrade, and manage Istio using declarative configuration.

---

# ‚≠ê **Istio Installation Platforms**

Istio supports multiple Kubernetes platforms:

* Google Kubernetes Engine (GKE)
* Amazon EKS
* k3d
* K3s
* MicroK8s
* Minikube
* Red Hat OpenShift
* **Kind (local testing)** ‚Üê *we use this now*

---

# ‚≠ê **Kind Setup for Istio**

üìå Kind guide:
[https://istio.io/latest/docs/setup/platform-setup/kind/](https://istio.io/latest/docs/setup/platform-setup/kind/)

### **Create a Kind Cluster**

```sh
kind create cluster --name istio-testing
```

### **List clusters**

```sh
kind get clusters
```

### **Check kubeconfig contexts**

```sh
kubectl config get-contexts
```

---

# ‚≠ê **Istio Setup (Getting Started)**

Istio official quickstart:
[https://istio.io/latest/docs/setup/getting-started/](https://istio.io/latest/docs/setup/getting-started/)

### **Download Istio**

```sh
curl -L https://istio.io/downloadIstio | sh -
```

### **Go inside Istio folder**

```sh
cd istio-1.28.0
```

### **Sample apps**

```
cd samples/
```

### **Istioctl binary location**

```
cd bin/
```

### **Move istioctl to /usr/local/bin**

```sh
sudo mv istioctl /usr/local/bin
```

---

# ‚≠ê **Install Istio Demo Profile**

Demo profile = best for learning, includes everything.

```sh
istioctl install --set profile=demo -y
```

---

# ‚≠ê **Enable Sidecar Injection**

Istio sidecar (Envoy) automatically injects into pods.

```sh
kubectl label namespace default istio-injection=enabled
```

---

# ‚≠ê **Deploy Sample Application (Bookinfo)**

```sh
kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml
```

Check pods:

```sh
kubectl get pods
```

---

# ‚≠ê **Expose Application Using Istio Gateway**

```sh
kubectl apply -f samples/bookinfo/networking/bookinfo-gateway.yaml
```

Check gateway:

```sh
kubectl get gateway
```

---

# ‚≠ê **Important Istio Features to Study**

1. **Traffic Management**

   * VirtualService
   * DestinationRule
   * Gateway
   * HTTP routing, mirroring, retry

2. **Security**

   * mTLS
   * Peer authentication
   * AuthorizationPolicy

3. **Observability**

   * Kiali
   * Prometheus
   * Grafana
   * Jaeger

4. **Advanced**

   * Rate limiting
   * Fault injection
   * Canary deployment
   * Blue/Green deployments

---

# üéØ **One-Line Differences (Important for Interviews)**

### **Service Mesh**

"Service-to-service communication ko secure, control, and observe karne ke liye dedicated layer."

### **Istio**

"Service mesh tool using Envoy sidecar proxy."

### **Envoy**

"Sidecar proxy that handles all traffic for microservices."

### **Istiod**

"Central brain of Istio that manages configuration, certificates, and traffic rules."

====================================

Here are **clean, structured, complete theory notes** on the requested topics.
Simple language + Interview-oriented + Ready to revise.

---

# üìò **Service Mesh Notes ‚Äì Istio / Linkerd / Sidecar / Traffic / mTLS / Observability**

---

# üü¶ **1. Istio Basics**

### **What is Istio?**

Istio is a **service mesh** that manages **service-to-service communication** in microservices architecture using **Envoy sidecar proxies**.

### **What Istio provides:**

* Traffic management (routing, load balancing)
* Retries, timeouts, circuit breaking
* Security (mTLS)
* Policy enforcement
* Observability (metrics, logs, tracing)
* Zero-change to application code

### **Istio Components**

* **Envoy** ‚Üí Sidecar proxy (data plane)
* **Istiod** ‚Üí Control plane (traffic rules, mTLS certificates, config)
* **Gateway** ‚Üí Ingress/Egress traffic control

---

# üü© **2. Linkerd Basics**

### **What is Linkerd?**

Linkerd is a **lightweight, ultrafast service mesh** built in **Rust + Go**.

### **Key features**

* Simple, fast, low latency
* Sidecar proxy (linkerd-proxy)
* Automatic mTLS
* Traffic splitting
* Observability dashboard
* Multi-cluster support

### **Istio vs Linkerd (One-line)**

* **Istio** = Feature-rich, powerful, complex.
* **Linkerd** = Lightweight, simple, performance-focused.

---

# üüß **3. Sidecar Proxies**

### **What is a Sidecar Proxy?**

A **sidecar proxy** is a separate container added beside your application container inside the same Pod.

### **Why sidecar is used?**

It intercepts all **incoming and outgoing traffic** and provides:

* Routing
* Load balancing
* Security (mTLS)
* Logs and metrics
* Retries, circuit breaker

### **Popular Sidecar Proxies**

* **Envoy** (Istio)
* **linkerd-proxy** (Linkerd)

### **How It Works**

```
App Container  ‚Üí  Sidecar Proxy ‚Üí Other Services
```

Application doesn‚Äôt handle network logic.

---

# üü® **4. Traffic Splitting, Retries, mTLS**

## ‚≠ê **Traffic Splitting**

Used for:


* Canary releases
* A/B testing
* Blue/Green deployment

### Example

* 90% traffic ‚Üí v1
* 10% traffic ‚Üí v2

Istio does this using **VirtualService + DestinationRule**.

---

## ‚≠ê **Retries**

Retries are used to improve reliability by retrying failed requests.

Istio supports:

* Retry count
* Delay
* Timeout
* Per-try timeout

Example:

* Retry 3 times before failing.

---

## ‚≠ê **mTLS (Mutual TLS)**

### What is mTLS?

Both **client and server** authenticate each other using certificates.

### Why mTLS?

* Encrypts all service-to-service traffic
* Prevents man-in-the-middle attacks
* Ensures identity of each service

Istio provides **automatic mTLS** using certificates issued by **Istiod**.

Levels:

* Permissive
* Strict

---

# üü´ **5. Observability and Tracing**

## ‚≠ê **Observability Components**

Istio provides complete observability using:

### **Metrics**

* Service metrics
* Request count
* Latency
* Errors

Collected using:

* **Prometheus**

### **Dashboards**

* **Grafana** (visual metrics)
* **Kiali** (mesh topology view)
* **Istio dashboard**

---

## ‚≠ê **Distributed Tracing**

Tracing follows a request across multiple microservices.

Istio uses:

* **Jaeger**
* **Zipkin**
* **OpenTelemetry**

### Tracing helps to identify:

* Slow microservices
* Latency issues
* Request flow
* Bottlenecks

---

# üéØ **One-Line Summary for Interview**

* **Istio** = Advanced service mesh with Envoy sidecar.
* **Linkerd** = Lightweight service mesh with auto-mTLS.
* **Sidecar Proxy** = Intercepts traffic and applies mesh features.
* **Traffic Splitting** = Sends % traffic to different versions.
* **Retries** = Automatically retry failed requests.
* **mTLS** = Secure, encrypted, authenticated service-to-service traffic.
* **Observability** = Metrics (Prometheus), dashboards (Grafana/Kiali), tracing (Jaeger).
